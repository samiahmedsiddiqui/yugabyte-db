<div class="tile-wrapper">
    {{ .Inner }}
</div>
<script>
  function checkIfOverflowAll() {
    const containers = document.querySelectorAll('.tile-wrapper');

    containers.forEach(container => {
      const children = container.querySelectorAll('.card-panel');
      const childsCount = children.length;
      const containerWidth = container.clientWidth;

      container.classList.remove('theme-4col', 'theme-3col', 'theme-2col','theme-1col');

      if (childsCount === 0) return;

      const firstItem = children[0];
      const itemWidth = firstItem.offsetWidth;
      const gap = 24;

      const widthFor4 = (itemWidth * 4) + (gap * 3);
      const widthFor3 = (itemWidth * 3) + (gap * 2);
      const widthFor2 = (itemWidth * 2) + (gap );
      console.log('Container width:', containerWidth, '| Width for 4:', widthFor4, '| Width for 3:', widthFor3);
      if (widthFor4 <= containerWidth) {
        container.classList.add('theme-4col');
      } else if (widthFor3 <= containerWidth) {
        container.classList.add('theme-3col');
      } else if (widthFor2 <= containerWidth) {
        container.classList.add('theme-2col');
      } else {
        container.classList.add('theme-1col');
      }

      container.classList.add('items' + childsCount);
    });
  }
  window.addEventListener('load', checkIfOverflowAll);
  window.addEventListener('resize', checkIfOverflowAll);
</script>